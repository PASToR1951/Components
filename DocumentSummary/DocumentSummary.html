<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Summary</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --theme-gold: #FDB813;
            --theme-gold-darker: #EAA10F;
            --theme-gold-light-bg: rgba(253, 184, 19, 0.2);
            --theme-gold-lighter-bg: rgba(253, 184, 19, 0.1);
            --theme-gold-highlight: rgba(253, 184, 19, 0.4);
            --theme-green-dark: #006A4E;
            --theme-green-darker-text: #00523D;
            --theme-green-light-bg: rgba(0, 106, 78, 0.3);
            --theme-green-lighter-bg: rgba(0, 106, 78, 0.15);
            --theme-green-border: rgba(0, 106, 78, 0.7);
            --theme-page-bg: #F9F6EE;
            --neutral-border-color: #e5e7eb;
            --input-border-color: #d1d5db;
            --placeholder-text-color: #9ca3af;
            --text-on-gold: #000000;
            --text-on-green: #FFFFFF;
            --primary-text-color: #1f2937;
            --secondary-text-color: #4b5563;
            --tertiary-text-color: #6b7280;
            --theme-accent-gray: #6b7280;
            --pastel-gold: #FFF5CC;
            --pastel-green: #D0EAD0;
            --footer-glass-bg-color: rgba(255, 255, 255, 0.25);
            --footer-glass-border-color: rgba(255, 255, 255, 0.4);
            --footer-glass-blur-radius: 6px;
        }

        html {
            height: 100%;
            box-sizing: border-box;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--theme-page-bg);
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23D3CBBF' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            color: var(--primary-text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            margin: 0;
        }

        .page-wrapper {
            flex-grow: 1;
            padding-top: 2.5rem;
        }
        @media (min-width: 768px) {
            .page-wrapper {
                padding-top: 4rem;
            }
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Inter', sans-serif;
            color: var(--primary-text-color);
            font-weight: 600;
            margin-top: 0;
        }

        .font-libre { font-family: 'Libre Baskerville', serif; }
        .font-inter { font-family: 'Inter', sans-serif; }

        .container {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        @media (min-width: 640px) { .container { max-width: 640px; padding-left: 1.5rem; padding-right: 1.5rem; } }
        @media (min-width: 768px) { .container { max-width: 768px; } }
        @media (min-width: 1024px) { .container { max-width: 1024px; padding-left: 2rem; padding-right: 2rem; } }
        @media (min-width: 1280px) { .container { max-width: 1280px; } }
        @media (min-width: 1536px) { .container { max-width: 1536px; } }

        .page-header {
            position: relative;
            overflow: hidden;
            background-color: var(--theme-green-dark);
            color: var(--text-on-green);
            padding-top: 3rem;
            padding-bottom: 3rem;
            margin-bottom: 3rem;
        }

        @keyframes headerGradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .page-header::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 0;
            background-image: linear-gradient(135deg,
                rgba(220, 38, 38, 0.25), rgba(253, 184, 19, 0.25),
                rgba(220, 38, 38, 0.28), rgba(253, 184, 19, 0.28));
            background-size: 400% 400%;
            animation: headerGradientAnimation 25s ease infinite;
            opacity: 0.8;
        }
        .page-header .header-content {
            position: relative;
            z-index: 1;
            text-align: left;
        }
        .page-header .header-content h1 {
            color: var(--text-on-green);
            font-weight: 700;
            font-size: 1.875rem;
            line-height: 1.2;
            margin-bottom: 0.5rem;
        }
        .page-header .header-content p {
            color: rgba(255, 255, 255, 0.85);
            font-size: 1.125rem;
            margin-bottom: 0.25rem;
        }
        .page-header .header-content p:last-of-type {
            font-size: 1rem;
            margin-bottom: 0;
        }
        @media (min-width: 640px) {
            .page-header .header-content h1 { font-size: 2.25rem; }
            .page-header .header-content p { font-size: 1.25rem; }
            .page-header .header-content p:last-of-type { font-size: 1.125rem; }
        }
        @media (min-width: 1024px) {
            .page-header .header-content h1 { font-size: 3rem; }
        }

        .document-item-base {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background-color: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(16px) saturate(140%);
            -webkit-backdrop-filter: blur(16px) saturate(140%);
            border: 1px solid rgba(229, 231, 235, 0.35);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .document-item-base:hover {
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .document-item-base.mb-12 { margin-bottom: 3rem; }
        @media (min-width: 640px) { .document-item-base { padding: 2rem; } }
        @media (min-width: 1024px) { .document-item-base { padding: 2.5rem; } }

        .document-item-base h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.25rem;
            border-bottom: 1px solid var(--neutral-border-color);
            padding-bottom: 1rem;
        }
        @media (min-width: 640px) { .document-item-base h2 { font-size: 1.875rem; } }

        .document-item-base .abstract-text {
            color: var(--secondary-text-color);
            line-height: 1.625;
            text-align: justify;
            font-size: 1rem;
            margin-top: 1rem;
        }
        @media (min-width: 640px) { .document-item-base .abstract-text { font-size: 1.125rem; } }
        
        .document-item-base .keywords-section {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(var(--neutral-border-color), 0.5);
        }
        .document-item-base .keywords-section h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
        }
        .document-item-base .keywords-container-flex {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .doc-info-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem 0;
            font-size: 1rem;
            margin-top: 1rem;
        }
        .doc-info-grid > div {
            line-height: 1.5;
        }
        .doc-info-grid strong {
            display: block;
            margin-bottom: 0.125rem;
            color: var(--primary-text-color);
            font-weight: 500;
        }
        .doc-info-grid span, .doc-info-grid a {
            color: var(--secondary-text-color);
        }
        .doc-info-grid .opacity-90 { opacity: 0.9; }

        .btn {
            padding: 0.65rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 500;
            text-align: center;
            transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, opacity 0.3s ease, transform 0.3s ease, box-shadow 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9375rem;
            line-height: 1.375rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            cursor: pointer;
            text-decoration: none;
            border: 1px solid transparent;
        }
        .btn:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }
        .btn-primary {
            background-color: var(--theme-green-dark);
            color: var(--text-on-green);
            border-color: var(--theme-green-dark);
        }
        .btn-primary:hover {
            background-color: var(--theme-green-darker-text);
            border-color: var(--theme-green-darker-text);
        }
        .btn-secondary {
            background-color: var(--theme-gold);
            color: var(--text-on-gold);
            border-color: var(--theme-gold);
        }
        .btn-secondary:hover {
            background-color: var(--theme-gold-darker);
            border-color: var(--theme-gold-darker);
        }
        .btn i, .btn svg {
            width: 1.25rem;
            height: 1.25rem;
            font-size: 1em;
        }

        .clickable-meta {
            cursor: pointer;
            text-decoration: none;
            color: var(--primary-text-color);
            opacity: 0.9;
            margin-right: 0.25rem;
            display: inline-block;
            transition: color 0.2s ease, text-decoration-color 0.2s ease, opacity 0.2s ease;
        }
        .clickable-meta:hover {
            text-decoration: underline;
            text-decoration-color: var(--theme-green-dark);
            color: var(--theme-green-dark);
            opacity: 1;
        }
        .clickable-author:hover {
            color: var(--theme-green-darker-text);
            text-decoration-color: var(--theme-green-darker-text);
        }
        .clickable-keyword:hover {
            color: var(--theme-gold-darker);
            text-decoration-color: var(--theme-gold-darker);
        }

        .floating-action-container {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            padding: 0.75rem 1rem;
            background-color: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px) saturate(180%);
            -webkit-backdrop-filter: blur(10px) saturate(180%);
            border-radius: 0.75rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0,0,0,0.07);
            border: 1px solid rgba(229, 231, 235, 0.4);
            display: flex;
            gap: 0.75rem;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            opacity: 1;
            visibility: visible;
        }
        .floating-action-container.hidden {
            opacity: 0;
            visibility: hidden;
            transform: translateX(-50%) translateY(10px);
            pointer-events: none;
        }

        .tag-pill {
            display: inline-block;
            background-color: var(--theme-gold-light-bg);
            color: var(--text-on-gold);
            padding: 0.3rem 0.8rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            white-space: nowrap;
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
            border: 1px solid var(--theme-gold-darker);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            text-decoration: none;
        }
        .tag-pill:hover {
            background-color: var(--theme-gold);
            color: var(--text-on-gold);
            border-color: var(--theme-gold-darker);
            box-shadow: 0 2px 4px rgba(0,0,0,0.07);
        }

        @keyframes subtleGradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .footer-wrapper {
            margin-top: auto;
            width: 100%;
        }
        .site-footer {
            position: relative;
            overflow: hidden;
            background-color: var(--footer-glass-bg-color);
            -webkit-backdrop-filter: blur(var(--footer-glass-blur-radius));
            backdrop-filter: blur(var(--footer-glass-blur-radius));
            border-top: 1px solid var(--footer-glass-border-color);
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
            color: #374151;
        }
        .site-footer::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: -1;
            background: linear-gradient(45deg, var(--pastel-gold), var(--pastel-green), var(--pastel-gold));
            background-size: 200% 200%;
            animation: subtleGradientAnimation 18s ease infinite;
            opacity: 0.7;
        }
        .footer-content-padding {
            position: relative;
            z-index: 1;
            padding: 2rem 1.5rem;
            max-width: 80rem;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 640px) { .footer-content-padding { padding-left: 2rem; padding-right: 2rem; } }
        @media (min-width: 1024px) { .footer-content-padding { padding-left: 2.5rem; padding-right: 2.5rem; } }

        .footer-layout {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            text-align: center;
        }
        @media (min-width: 1024px) {
            .footer-layout {
                flex-direction: row;
                justify-content: space-between;
                align-items: flex-start;
                text-align: left;
            }
        }

        .footer-logo-section { flex-shrink: 0; }
        .footer-logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 0.75rem;
        }
        @media (min-width: 640px) {
            .footer-logo-container { align-items: flex-start; text-align: left; }
        }
        @media (min-width: 1024px) {
             .footer-logo-container { align-items: flex-start; }
        }
        .footer-logo-container img {
            height: 4rem;
            width: auto;
            margin-bottom: 0.5rem;
        }
        @media (min-width: 640px) { .footer-logo-container img { height: 5rem; margin-bottom: 0; } }

        .footer-nav {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }
        @media (min-width: 1024px) { .footer-nav { align-items: flex-start; } }

        .footer-link {
            color: var(--theme-green-dark);
            transition: color 0.2s ease-in-out, opacity 0.2s ease-in-out;
            text-decoration: none;
            font-weight: 500;
        }
        .footer-link:hover {
            color: var(--theme-gold);
            opacity: 0.85;
        }
        .copyright-text {
            color: #6b7280;
            font-size: 0.75rem;
        }

        .message-box-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .message-box-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        .message-box-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            max-width: 90%;
            width: 400px;
            text-align: center;
            position: relative;
        }
        .message-box-text {
            font-size: 1.125rem;
            color: var(--primary-text-color);
            margin-bottom: 1rem;
        }
        .message-box-close-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: transparent;
            border: none;
            font-size: 1.5rem;
            line-height: 1;
            cursor: pointer;
            color: #9ca3af;
            padding: 0.25rem;
        }
        .message-box-close-btn:hover { color: #6b7280; }

    </style>
</head>
<body>
    <div class="page-wrapper">

        <header class="page-header" role="banner">
            <div class="header-content container">
                <h1>Lorem ipsum &amp; dolor sit amet &amp;&amp;Heading</h1>
                <p>Nikolai Bain</p>
                <p>2021</p>
            </div>
        </header>

        <main class="container" role="main">
            <article class="document-item-base">
                <header>
                    <h2>Abstract</h2>
                </header>
                <section>
                    <p class="abstract-text">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat. Aenean faucibus nibh et justo cursus id rutrum lorem imperdiet. Nunc ut sem vitae risus tristique posuere.
                    </p>
                </section>
                <section class="keywords-section">
                    <h3>Keywords</h3>
                    <div class="keywords-container-flex">
                        <a href="#" class="tag-pill">Archiving</a>
                        <a href="#" class="tag-pill">Digital Preservation</a>
                        <a href="#" class="tag-pill">Data Management</a>
                        <a href="#" class="tag-pill">Research</a>
                        <a href="#" class="tag-pill">Thesis</a>
                    </div>
                </section>
            </article>

            <article class="document-item-base mb-12">
                 <header>
                    <h2>Document Information</h2>
                </header>
                <section class="doc-info-grid">
                    <div>
                        <strong>Title:</strong>
                        <span id="info-title">Lorem ipsum &amp; dolor sit amet &amp;&amp;</span>
                    </div>
                    <div>
                        <strong>Author(s):</strong>
                        <a href="#" class="clickable-meta clickable-author" id="info-author">Nikolai Bain</a>
                    </div>
                    <div>
                        <strong>Editor(s):</strong>
                        <span class="opacity-90" id="info-editor">John Smith</span>
                    </div>
                    <div>
                        <strong>Publication Year:</strong>
                        <span id="info-year">2021</span>
                    </div>
                    <div>
                        <strong>Volume:</strong>
                        <span id="info-volume">2nd Edition</span>
                    </div>
                    <div>
                        <strong>Number of Pages:</strong>
                        <span id="info-pages">320</span>
                    </div>
                    <div>
                        <strong>Category:</strong>
                        <span class="opacity-90" id="info-category">Thesis</span>
                    </div>
                    <div>
                        <strong>Research Agenda:</strong>
                        <span class="opacity-90" id="info-agenda">Archiving, Digital Preservation, Data Management</span>
                    </div>
                    <div>
                        <strong>Date Uploaded:</strong>
                        <span id="info-date-uploaded">December 10, 2024</span>
                    </div>
                    <div>
                        <strong>Keywords:</strong>
                        <span id="info-keywords">
                            <a href="#" class="clickable-meta clickable-keyword">Archiving</a>,
                            <a href="#" class="clickable-meta clickable-keyword">Digital Preservation</a>,
                            <a href="#" class="clickable-meta clickable-keyword">Data Management</a>,
                            <a href="#" class="clickable-meta clickable-keyword">Research</a>,
                            <a href="#" class="clickable-meta clickable-keyword">Thesis</a>
                        </span>
                    </div>
                </section>
            </article>

            <div id="floating-buttons" class="floating-action-container">
                <a id="read-doc-btn" href="#" class="btn btn-primary">
                    <i class="fas fa-eye" aria-hidden="true"></i>
                    Read Document
                </a>
                <a id="read-later-btn" href="#" class="btn btn-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm.75-13a.75.75 0 0 0-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 0 0 0-1.5h-3.25V5Z" clip-rule="evenodd" />
                    </svg>
                    Read Later
                </a>
            </div>

        </main>
    </div>

    <div class="footer-wrapper">
        <footer id="site-footer-element" class="site-footer" role="contentinfo">
            <div class="footer-content-padding">
                <div class="footer-layout">
                    <div class="footer-logo-section">
                        <div class="footer-logo-container">
                            <img
                                src="https://placehold.co/200x80/006A4E/FFFFFF?text=PeAS+Logo"
                                alt="PeAS Logo"
                                onerror="this.onerror=null; this.src='https://placehold.co/200x80/cccccc/ffffff?text=Logo+Error';">
                        </div>
                        <p class="copyright-text">&copy; <span id="footerCurrentYear"></span> PeAS. All Rights Reserved.</p>
                    </div>
                    <nav class="footer-nav" role="navigation" aria-label="Footer Navigation">
                        <a href="#" class="footer-link">Home</a>
                        <a href="#" class="footer-link">Contact</a>
                        <a href="#" class="footer-link">Terms & Conditions</a>
                        <a href="#" class="footer-link">Privacy Policy</a>
                    </nav>
                </div>
            </div>
        </footer>
    </div>

    <div id="message-box-overlay" class="message-box-overlay" aria-hidden="true">
        <div class="message-box-content" role="alertdialog" aria-labelledby="message-box-text">
            <button id="message-box-close" class="message-box-close-btn" aria-label="Close message">&times;</button>
            <p id="message-box-text" class="message-box-text"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const headerTitle = document.querySelector('header h1');
            const headerAuthor = document.querySelector('header p:nth-of-type(1)');
            const headerYear = document.querySelector('header p:nth-of-type(2)');

            const abstractArticle = document.querySelector('.document-item-base:nth-of-type(1)');
            const abstractText = abstractArticle ? abstractArticle.querySelector('.abstract-text') : null;
            const abstractKeywordsContainer = abstractArticle ? abstractArticle.querySelector('.keywords-container-flex') : null;

            const infoTitle = document.getElementById('info-title');
            const infoAuthorLink = document.getElementById('info-author');
            const infoEditor = document.getElementById('info-editor');
            const infoYearElem = document.getElementById('info-year');
            const infoVolume = document.getElementById('info-volume');
            const infoPages = document.getElementById('info-pages');
            const infoCategory = document.getElementById('info-category');
            const infoAgenda = document.getElementById('info-agenda');
            const infoDateUploaded = document.getElementById('info-date-uploaded');
            const infoKeywordsContainer = document.getElementById('info-keywords');

            const readDocBtn = document.getElementById('read-doc-btn');
            const readLaterBtn = document.getElementById('read-later-btn');
            const messageBoxOverlay = document.getElementById('message-box-overlay');
            const messageBoxText = document.getElementById('message-box-text');
            const messageBoxCloseBtn = document.getElementById('message-box-close');
            const messageBoxContent = document.querySelector('.message-box-content');


            async function loadDocumentData(docId) {
                try {
                    // Determine which mock data to use based on docId for testing
                    let currentMockData;
                    if (docId === 1) { // Example for a "Confluence" document
                        currentMockData = {
                            title: "Collected Works on Digital Archiving",
                            author: "Dr. Anya Sharma et al.",
                            publication_year: "2023",
                            abstract: "A comprehensive collection of papers and findings from the International Symposium on Digital Preservation. This volume covers topics from metadata standards to long-term storage solutions and ethical considerations in digital archiving.",
                            keywords: ["Digital Archives", "Confluence", "Symposium Proceedings", "Preservation Strategies"],
                            editor: "Dr. Ben Carter",
                            volume: "Vol. IV", // Has a volume
                            pages: "580",
                            category: "Confluence", // Category that should show volume
                            research_agenda: "Digital Preservation, Archival Science",
                            date_uploaded: "2024-01-20T00:00:00.000Z",
                            document_url: "#simulated-doc-url-confluence",
                        };
                    } else { // Example for a "Thesis" document (docId !== 1)
                         currentMockData = {
                            title: "The Impact of Climate Change on Manuscript Preservation",
                            author: "Dr. Eleanor Vance",
                            publication_year: "2022",
                            abstract: "This thesis investigates the specific challenges posed by climate change to the physical integrity of ancient manuscripts and proposes mitigation strategies for archives and libraries.",
                            keywords: ["Archiving", "Manuscripts", "Preservation", "Climate Change", "Thesis"],
                            editor: "Prof. Ian Tellman",
                            volume: null, // Should be N/A for Thesis
                            pages: "210",
                            category: "Thesis", // Category that should NOT show volume
                            research_agenda: "Preservation Strategies, Manuscript Studies",
                            date_uploaded: "2023-05-15T00:00:00.000Z",
                            document_url: "#simulated-doc-url-thesis",
                        };
                    }

                    await new Promise(resolve => setTimeout(resolve, 500)); 
                    const data = currentMockData; // Use the selected mock data

                    if (headerTitle) headerTitle.textContent = data.title || 'Title Not Found';
                    if (headerAuthor) headerAuthor.textContent = data.author || 'Author Not Found';
                    if (headerYear) headerYear.textContent = data.publication_year || 'Year Not Found';

                    if (abstractText) abstractText.textContent = data.abstract || 'Abstract not available.';
                    if (abstractKeywordsContainer && data.keywords && Array.isArray(data.keywords)) {
                        abstractKeywordsContainer.innerHTML = '';
                        data.keywords.forEach(keyword => {
                            const pill = document.createElement('a');
                            pill.href = `#/search/keyword/${encodeURIComponent(keyword)}`;
                            pill.className = 'tag-pill';
                            pill.textContent = keyword;
                            pill.addEventListener('click', (e) => {
                                e.preventDefault();
                                searchByKeyword(keyword);
                            });
                            abstractKeywordsContainer.appendChild(pill);
                        });
                    }

                    if (infoTitle) infoTitle.textContent = data.title || '';
                    if (infoAuthorLink) {
                        infoAuthorLink.textContent = data.author || '';
                        infoAuthorLink.href = `#/search/author/${encodeURIComponent(data.author || '')}`;
                        infoAuthorLink.addEventListener('click', (e) => {
                            e.preventDefault();
                            searchByAuthor(data.author);
                        });
                    }
                    if (infoEditor) infoEditor.textContent = data.editor || 'N/A';
                    if (infoYearElem) infoYearElem.textContent = data.publication_year || 'N/A';
                    
                    // Conditional logic for Volume based on Category
                    if (infoCategory) infoCategory.textContent = data.category || 'N/A';
                    if (infoVolume) {
                        if (data.category === "Confluence" || data.category === "Synergy") {
                            infoVolume.textContent = data.volume || 'N/A';
                        } else {
                            infoVolume.textContent = 'N/A';
                        }
                    }
                    
                    if (infoPages) infoPages.textContent = data.pages || 'N/A';
                    if (infoAgenda) infoAgenda.textContent = data.research_agenda || 'N/A';
                    if (infoDateUploaded && data.date_uploaded) {
                         infoDateUploaded.textContent = new Date(data.date_uploaded).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' });
                    } else if (infoDateUploaded) {
                        infoDateUploaded.textContent = 'N/A';
                    }

                    if (infoKeywordsContainer && data.keywords && Array.isArray(data.keywords)) {
                        infoKeywordsContainer.innerHTML = '';
                        data.keywords.forEach((keyword, index) => {
                            const link = document.createElement('a');
                            link.href = `#/search/keyword/${encodeURIComponent(keyword)}`;
                            link.className = 'clickable-meta clickable-keyword';
                            link.textContent = keyword;
                            link.addEventListener('click', (e) => {
                                e.preventDefault();
                                searchByKeyword(keyword);
                            });
                            infoKeywordsContainer.appendChild(link);
                            if (index < data.keywords.length - 1) {
                                infoKeywordsContainer.appendChild(document.createTextNode(', '));
                            }
                        });
                    }

                    if (readDocBtn && data.document_url) {
                        readDocBtn.href = data.document_url;
                    }

                } catch (error) {
                    console.error('Error fetching document data:', error);
                    if (abstractText) abstractText.textContent = 'Failed to load document data. Please try again later.';
                    showMessage('Error: Could not load document details.', true);
                }
            }

            function showMessage(message, isError = false) {
                if (messageBoxText && messageBoxOverlay && messageBoxContent) {
                    messageBoxText.textContent = message;
                    messageBoxContent.style.borderColor = isError ? 'var(--theme-gold-darker)' : 'var(--neutral-border-color)';
                    messageBoxOverlay.classList.add('visible');
                    messageBoxOverlay.setAttribute('aria-hidden', 'false');
                    messageBoxCloseBtn.focus();
                }
            }

            function hideMessage() {
                if (messageBoxOverlay) {
                    messageBoxOverlay.classList.remove('visible');
                    messageBoxOverlay.setAttribute('aria-hidden', 'true');
                }
            }

            if (messageBoxCloseBtn) messageBoxCloseBtn.addEventListener('click', hideMessage);
            if (messageBoxOverlay) {
                messageBoxOverlay.addEventListener('click', (event) => {
                    if (event.target === messageBoxOverlay) hideMessage();
                });
                document.addEventListener('keydown', (event) => {
                    if (event.key === 'Escape' && messageBoxOverlay.classList.contains('visible')) {
                        hideMessage();
                    }
                });
            }

            if (readDocBtn) {
                readDocBtn.addEventListener('click', (event) => {
                    event.preventDefault();
                    showMessage(`Simulating document opening... (URL: ${readDocBtn.href})`);
                });
            }

            if (readLaterBtn) {
                readLaterBtn.addEventListener('click', (event) => {
                    event.preventDefault();
                    const docId = currentDocumentId; // Use the ID of the currently loaded document
                    showMessage('Adding to Read Later list...');
                    setTimeout(() => {
                        const success = Math.random() > 0.2; 
                        if (success) {
                            showMessage('Document added to your Read Later list!');
                        } else {
                            showMessage('Failed to add to Read Later. Please try again.', true);
                        }
                    }, 1000);
                });
            }

            function searchByKeyword(keyword) {
                console.log(`Searching for keyword: ${keyword}`);
                showMessage(`Simulating search for keyword: "${keyword}"`);
            }

            function searchByAuthor(author) {
                console.log(`Searching for author: ${author}`);
                showMessage(`Simulating search for author: "${author}"`);
            }

            // Load initial document (e.g., docId = 1 for Confluence, or try 2 for Thesis)
            let currentDocumentId = 1; // Change to 2 (or any other number) to see "Thesis" example
            // You could get this ID from URL parameter in a real application:
            // const params = new URLSearchParams(window.location.search);
            // currentDocumentId = parseInt(params.get('id')) || 1;

            loadDocumentData(currentDocumentId);


            const floatingButtons = document.getElementById('floating-buttons');
            const footerElement = document.getElementById('site-footer-element');

            if (floatingButtons && footerElement) {
                const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
                const observerCallback = (entries) => {
                    entries.forEach(entry => {
                        floatingButtons.classList.toggle('hidden', entry.isIntersecting);
                    });
                };
                const observer = new IntersectionObserver(observerCallback, observerOptions);
                observer.observe(footerElement);
            } else {
                console.error("Could not find floating buttons or footer element for Intersection Observer.");
            }

            const yearElement = document.getElementById('footerCurrentYear');
            if (yearElement) {
                yearElement.textContent = new Date().getFullYear();
            }

        });
    </script>

</body>
</html>
