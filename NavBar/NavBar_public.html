<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navbar with Login Button - Database Ready (Responsive)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- Base Styles --- */
        html, body {
            min-height: 100%;
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* bg-gray-100 */
            overflow-x: hidden; /* Prevent horizontal scrollbar */
        }
        /* Canvas for confetti - ensuring it's on top */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10000; /* Ensure confetti is above other elements */
        }

        /* --- Theme Colors (Classic Green & Gold, Darker Greenish Navbar) --- */
        :root {
            --theme-gold: #FDB813; /* Vibrant Gold from image */
            --theme-gold-darker: #EAA10F; /* Darker gold for hover */
            --theme-gold-darkest: #D48F0D; /* Even darker for active/pressed state */
            --theme-gold-light-bg: rgba(253, 184, 19, 0.2);
            --theme-gold-lighter-bg: rgba(253, 184, 19, 0.1); /* Used for search result hover */
            --theme-gold-highlight: rgba(253, 184, 19, 0.4);

            --theme-green-dark: #006A4E; /* Classic Green from image */
            --theme-green-darker-text: #00523D; /* Darker version for text */
            --theme-green-light-bg: rgba(0, 106, 78, 0.3);
            --theme-green-lighter-bg: rgba(0, 106, 78, 0.15);
            --theme-green-border: rgba(0, 106, 78, 0.7);
            /* Updated navbar background to a darker greenish color */
            --theme-navbar-bg: #C8E6C9; /* Darker Greenish Background */
            --neutral-border-color: #b0bec5; /* Slightly darker gray for contrast */
            --input-border-color: #b0bec5;
            --placeholder-text-color: #78909c; /* Darker placeholder */
            --off-white-text: #F5F5F5; /* Whitesmoke - for login button text */
        }

        /* --- Navbar Styling (Darker Greenish Background) --- */
        nav.sticky {
            background-color: var(--theme-navbar-bg) !important;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.08) !important; /* Adjusted shadow */
            border-bottom: 1px solid var(--theme-green-light-bg) !important;
        }

        /* Default Nav Link Color */
        .md\\:block .ml-10 a.nav-link-desktop,
        #mobile-menu a.nav-link-mobile,
        #mobile-menu button.nav-link-mobile {
            color: var(--theme-green-darker-text) !important; /* Dark green text still works */
            transition: color 0.2s ease, background-color 0.2s ease, transform 0.2s ease, font-weight 0.2s ease;
            position: relative;
            overflow: visible !important;
            padding-bottom: 5px;
        }

        /* Nav links hover effect */
        .md\\:block .ml-10 a.nav-link-desktop:hover,
        #mobile-menu a.nav-link-mobile:hover,
        #mobile-menu button.nav-link-mobile:hover {
            background-color: var(--theme-gold-light-bg) !important;
            color: var(--theme-gold-darker) !important;
            transform: translateY(-2px);
            font-weight: 600 !important;
        }

        /* Nav link hover bar */
        .md\\:block .ml-10 a.nav-link-desktop::after,
        #mobile-menu a.nav-link-mobile::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; width: 100%; height: 3px;
            background-color: var(--theme-gold);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease-out;
        }
        .md\\:block .ml-10 a.nav-link-desktop:hover::after,
        #mobile-menu a.nav-link-mobile:hover::after {
            transform: scaleX(1);
        }
         #mobile-menu button.nav-link-mobile::after { content: none !important; }
         #mobile-menu button.nav-link-mobile { padding-bottom: 0; }


        /* Logo hover effect */
        .flex-shrink-0 img.h-20 { transition: transform 0.3s ease, opacity 0.3s ease; }
        .flex-shrink-0 img.h-20:hover { transform: scale(1.08); opacity: 0.85; }

        /* Desktop Search Button */
        #search-open-button {
            background-color: rgba(255, 255, 255, 0.85); /* More opaque white */
            border: 1px solid var(--theme-green-border);
            border-radius: 0.375rem;
            padding: 0.4rem 0.75rem;
            max-width: 300px;
            display: flex;
            align-items: center;
            text-align: left;
            font-size: 0.875rem;
            line-height: 1.25rem;
            color: var(--placeholder-text-color); /* Use updated placeholder color */
            transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            cursor: pointer;
        }
        #search-open-button:hover {
            background-color: rgba(255, 255, 255, 0.95); /* Almost fully opaque on hover */
            border-color: var(--theme-green-dark);
        }
        #search-open-button:focus {
            outline: none;
            border-color: var(--theme-gold) !important;
            box-shadow: 0 0 0 2px var(--theme-gold-lighter-bg) !important;
        }
        #search-open-button .search-bar-icon {
            color: var(--theme-green-dark);
            margin-right: 0.5rem;
            flex-shrink: 0;
            height: 1.25rem;
            width: 1.25rem;
            transition: color 0.2s ease;
        }
        #search-open-button:hover .search-bar-icon {
            color: var(--theme-gold);
        }
        #search-open-button .search-bar-placeholder-text {
            color: var(--theme-green-darker-text); /* Dark green text remains legible */
            font-size: inherit;
            font-weight: normal;
            flex-grow: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Keyboard Shortcut Hint Styling */
        .kbd-shortcut {
            display: inline-flex; align-items: center; justify-content: center;
            font-family: 'Inter', sans-serif; background-color: #e5e7eb;
            color: #4b5563; border: 1px solid #9ca3af;
            border-bottom-width: 2px; border-radius: 0.25rem;
            padding: 0.1rem 0.35rem; font-size: 0.7em;
            font-weight: 600; line-height: 1; white-space: nowrap;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }
        #search-open-button-mobile .kbd-shortcut {
            background-color: var(--theme-green-dark); color: var(--theme-gold);
            border-color: var(--theme-gold-darker);
        }
        #search-open-button-mobile:hover .kbd-shortcut {
            background-color: var(--theme-green-darker-text) !important; color: white !important;
            border-color: var(--theme-green-dark) !important;
        }
        #searchPlaceholderOverlay .kbd-shortcut {
            background-color: #f3f4f6; color: #6b7280; border-color: #d1d5db;
            font-size: 0.85em; font-weight: 500; padding: 0.05rem 0.25rem;
            margin: 0 0.1rem; border-bottom-width: 1px;
        }
        #searchPlaceholderOverlay .kbd-shortcut:hover {
            background-color: #f3f4f6; color: #6b7280; border-color: #d1d5db;
        }

        /* Keyframes for moving gradient */
        @keyframes moveGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Enhanced Login Button Styling */
        #login-button, #mobile-login-button {
            background-image: linear-gradient(to right, var(--theme-gold) 0%, var(--theme-gold-darker) 50%, var(--theme-gold) 100%);
            background-size: 200% auto;
            color: var(--off-white-text);
            padding: 0.6rem 1.2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            font-size: 0.875rem;
            line-height: 1.25rem;
            transition: background-position 0.4s ease-out, color 0.2s ease, transform 0.15s ease, box-shadow 0.2s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            text-decoration: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
            animation: moveGradient 4s linear infinite;
        }


        #login-button:hover, #mobile-login-button:hover {
            background-position: right center;
            color: var(--off-white-text);
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 8px rgba(234, 161, 15, 0.3), 0 2px 4px rgba(234, 161, 15, 0.2);
        }

        #login-button:active, #mobile-login-button:active {
            transform: translateY(0px) scale(0.98);
            background-image: linear-gradient(to right, var(--theme-gold-darker) 0%, var(--theme-gold-darkest) 50%, var(--theme-gold-darker) 100%);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            color: var(--off-white-text);
        }

        #login-button:focus, #mobile-login-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px var(--theme-gold-light-bg), 0 4px 8px rgba(234, 161, 15, 0.3);
        }

        #mobile-login-button {
            width: 100%;
            margin-top: 0.75rem;
            padding: 0.75rem 1.2rem;
        }


        /* Mobile Menu Toggle Button Theming */
        .mobile-menu-button {
            color: var(--theme-green-darker-text) !important; /* Dark green text still works */
            background-color: transparent !important;
            transition: color 0.2s ease, background-color 0.2s ease;
        }
        .mobile-menu-button:hover {
            background-color: var(--theme-gold-light-bg) !important;
            color: var(--theme-gold-darker) !important;
        }
        .mobile-menu-button.focus\:ring-green-500:focus { --tw-ring-color: var(--theme-gold) !important; }


        /* Mobile menu general styling */
        #mobile-menu {
            background-color: var(--theme-navbar-bg); /* Ensure mobile menu also has the darker greenish bg */
        }
        #mobile-menu .border-t { /* Adjust border color in mobile menu */
             border-top-color: var(--theme-green-light-bg);
        }
        #mobile-menu a.hover\:bg-amber-100:hover {
            background-color: var(--theme-gold-light-bg) !important;
            color: var(--theme-green-darker-text) !important;
        }


        /* --- Search Overlay Styles with Animated Blob Background --- */
        #search-overlay {
            position: fixed; /* Ensures it covers the viewport */
            top: 0; left: 0; right: 0; bottom: 0;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            background-color: rgba(0, 40, 29, 0.65);
            z-index: 40; /* Higher than navbar */
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
            display: flex;
            padding: 2rem;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        #search-overlay.visible { opacity: 1; pointer-events: auto; }

        /* Animated Blobs */
        #search-overlay::before,
        #search-overlay::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            filter: blur(70px);
            opacity: 0;
        }

        #search-overlay::before { /* Gold Blob */
            width: 45vw; height: 45vw;
            min-width: 280px; max-width: 450px;
            min-height: 280px; max-height: 450px;
            background: var(--theme-gold);
            top: 5%; left: 5%;
            animation: moveBlob1 20s infinite alternate ease-in-out;
        }

        #search-overlay::after { /* Green Blob */
            width: 55vw; height: 55vw;
            min-width: 320px; max-width: 550px;
            min-height: 320px; max-height: 550px;
            background: var(--theme-green-dark);
            bottom: 2%; right: 2%;
            animation: moveBlob2 24s infinite alternate ease-in-out 2.5s;
        }

        @keyframes moveBlob1 {
            0%   { transform: translate(-15%, -15%) scale(0.8); opacity: 0.25; }
            25%  { transform: translate(15%, -5%) scale(1.1); opacity: 0.4; }
            50%  { transform: translate(5%, 15%) scale(0.9); opacity: 0.3; }
            75%  { transform: translate(-10%, 5%) scale(1.2); opacity: 0.45; }
            100% { transform: translate(-15%, -15%) scale(0.8); opacity: 0.25; }
        }

        @keyframes moveBlob2 {
            0%   { transform: translate(10%, 10%) scale(0.9); opacity: 0.3; }
            25%  { transform: translate(-5%, 15%) scale(0.7); opacity: 0.2; }
            50%  { transform: translate(-15%, -10%) scale(1.15); opacity: 0.4; }
            75%  { transform: translate(0%, -15%) scale(0.8); opacity: 0.25; }
            100% { transform: translate(10%, 10%) scale(0.9); opacity: 0.3; }
        }

        /* Content within the search overlay */
        .search-overlay-content {
            background-color: rgba(248, 249, 247, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            width: 100%; max-width: 48rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            border: 1px solid var(--neutral-border-color);
            transform: translateY(-20px);
            transition: transform 0.3s ease-in-out, background-color 0.3s ease, backdrop-filter 0.3s ease;
            position: relative;
            z-index: 1;
            max-height: calc(100vh - 4rem);
            display: flex; flex-direction: column;
        }
        #search-overlay.visible .search-overlay-content { transform: translateY(0); }

        .search-input-wrapper-overlay {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--neutral-border-color);
            flex-shrink: 0;
            position: relative; /* For positioning the clear button & spinner */
        }
        .search-icon-overlay { width: 1.5rem; height: 1.5rem; color: var(--theme-green-dark); margin-right: 0.75rem; flex-shrink: 0; }
        #searchInputOverlay {
            width: 100%;
            font-size: 1rem;
            line-height: 1.5rem;
            color: var(--theme-green-darker-text);
            background-color: transparent;
            border: none;
            outline: none;
            padding-right: 7.5rem; /* Increased padding for "Clear" text button AND spinner */
        }
        #searchInputOverlay::placeholder { color: #6c757d; opacity: 0.8; }

        /* Clear Search Input Button (Text Button) */
        #clearSearchInputButton {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            background-color: transparent;
            color: var(--theme-green-dark);
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* medium */
            padding: 0.25rem 0.5rem; /* py-1 px-2 */
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid transparent; /* For consistent height with potential bordered buttons */
            display: none; /* JS toggles this with .visible */
            cursor: pointer;
            transition: color 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
            z-index: 20;
            white-space: nowrap; /* Prevent text wrapping */
        }
        #clearSearchInputButton:hover {
            color: var(--theme-gold-darker);
            background-color: var(--theme-gold-lighter-bg);
            border-color: var(--theme-gold);
        }
        #clearSearchInputButton.visible {
            display: inline-flex;
            align-items: center; /* Vertically align text if needed */
        }

        #loadingSpinnerOverlay {
            position: absolute;
            right: 4.5rem; /* Positioned to the left of the text "Clear" button */
            top: 50%;
            transform: translateY(-50%);
            display: none;
            z-index: 10;
        }
        #loadingSpinnerOverlay.visible { display: inline-block; }
        #loadingSpinnerOverlay svg { animation: spin 1s linear infinite; height: 1.25rem; width: 1.25rem; color: var(--theme-green-dark); }


        /* Main Close Button for the entire overlay (Top Right of Viewport) */
        .search-overlay-close-btn {
            position: absolute;
            top: 1.5rem; /* Distance from top of viewport */
            right: 1.5rem; /* Distance from right of viewport */
            padding: 0.5rem;
            border-radius: 9999px; /* Fully rounded */
            background-color: rgba(255, 255, 255, 0.1); /* Subtle background for visibility */
            color: #e5e7eb; /* Light color for visibility against dark overlay */
            transition: background-color 0.2s, color 0.2s;
            z-index: 50; /* Ensure it's above everything in the overlay */
            cursor: pointer;
        }
        .search-overlay-close-btn:hover {
            background-color: rgba(255, 255, 255, 0.25);
            color: #ffffff;
        }
        .search-overlay-close-btn svg {
            width: 1.5rem; /* w-6 */
            height: 1.5rem; /* h-6 */
        }

        .sample-searches-overlay { padding: 0.75rem 1rem; border-bottom: 1px solid var(--neutral-border-color); display: flex; align-items: center; flex-wrap: wrap; gap: 0.5rem; flex-shrink: 0; background-color: rgba(248, 249, 247, 0.5); }
        .sample-searches-label-overlay { font-size: 0.875rem; color: var(--theme-green-dark); margin-right: 0.75rem; font-weight: 500; }
        .sample-search-item-overlay { font-size: 0.875rem; color: var(--theme-green-dark); background-color: var(--theme-green-lighter-bg); padding: 0.25rem 0.75rem; border-radius: 9999px; cursor: pointer; transition: background-color 0.2s ease, color 0.2s ease; border: 1px solid var(--theme-green-border); }
        .sample-search-item-overlay:hover { background-color: var(--theme-gold-light-bg); color: var(--theme-green-darker-text); border-color: var(--theme-gold); }

        .filters-container-overlay { padding: 0.75rem 1rem 1rem; background-color: rgba(248, 249, 247, 0.5); border-bottom: 1px solid var(--neutral-border-color); display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.75rem; flex-shrink: 0; }
        .filter-item-overlay { display: flex; flex-direction: column; }
        .filter-item-overlay label { font-size: 0.75rem; font-weight: 500; color: var(--theme-green-dark); margin-bottom: 0.25rem; }
        .filter-item-overlay select { width: 100%; padding: 0.5rem 0.75rem; font-size: 0.875rem; border: 1px solid var(--theme-green-border); border-radius: 0.375rem; background-color: rgba(255,255,255,0.8); transition: border-color 0.2s ease, box-shadow 0.2s ease; appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23006A4E' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; padding-right: 2.5rem; }
        .filter-item-overlay select:focus { outline: none; border-color: var(--theme-gold); box-shadow: 0 0 0 2px var(--theme-gold-lighter-bg); }

        /* Search Results Area - Enhanced Layout */
        #search-results-overlay { padding: 0.5rem; overflow-y: auto; flex-grow: 1; }
        .search-result-item {
            display: block;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            text-decoration: none;
            margin-bottom: 0.5rem;
            border: 1px solid transparent;
        }
        .search-result-item:hover {
            background-color: var(--theme-gold-lighter-bg);
            border-color: var(--theme-gold);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .search-result-title {
            font-weight: 600;
            font-size: 1rem;
            color: var(--theme-green-dark);
            margin-bottom: 0.25rem;
            transition: color 0.2s ease-in-out;
        }
        .search-result-item:hover .search-result-title {
            color: var(--theme-green-darker-text);
        }

        .search-result-meta-primary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.75rem;
            color: #4b5563;
            margin-bottom: 0.375rem;
        }
        .search-result-item:hover .search-result-meta-primary {
            color: var(--theme-green-dark);
        }
        .search-result-author {
            font-weight: 500;
        }
        .search-result-year {
            color: #6b7280;
        }
        .search-result-item:hover .search-result-year {
            color: var(--theme-green-dark);
        }

        .search-result-category-keywords {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .search-result-category-tag {
            font-size: 0.7rem;
            font-weight: 500;
            padding: 0.125rem 0.5rem;
            border-radius: 9999px;
            background-color: var(--theme-green-lighter-bg);
            color: var(--theme-green-darker-text);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .search-result-item:hover .search-result-category-tag {
            background-color: var(--theme-green-dark);
            color: white;
        }

        .search-result-keywords-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.375rem;
        }
        .keyword-pill {
            font-size: 0.7rem;
            background-color: #e5e7eb;
            color: #4b5563;
            padding: 0.125rem 0.625rem;
            border-radius: 9999px;
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .search-result-item:hover .keyword-pill {
            background-color: var(--theme-gold);
            color: var(--theme-green-darker-text);
        }

        .search-result-desc {
            font-size: 0.875rem;
            color: #6b7280;
            line-height: 1.5;
            transition: color 0.2s ease-in-out;
        }
        .search-result-item:hover .search-result-desc {
            color: #374151;
        }

        .search-no-results { text-align: center; padding: 1rem; color: #6b7280; }
        .highlight { background-color: var(--theme-gold-light-bg) !important; color: var(--theme-green-darker-text) !important; font-weight: 600; padding: 0 2px; border-radius: 3px; }
        #search-results-overlay::-webkit-scrollbar { width: 6px; }
        #search-results-overlay::-webkit-scrollbar-track { background: var(--theme-green-lighter-bg); border-radius: 10px; }
        #search-results-overlay::-webkit-scrollbar-thumb { background: var(--theme-green-light-bg); border-radius: 10px; }
        #search-results-overlay::-webkit-scrollbar-thumb:hover { background: var(--theme-green-dark); }

        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        @media (min-width: 768px) { /* md breakpoint */
            #searchInputOverlay { font-size: 1.125rem; line-height: 1.75rem; }
        }
    </style>
</head>
<body class="bg-gray-100">
    <canvas id="confetti-canvas"></canvas>
    <nav class="shadow-md sticky top-0 z-30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <img class="h-20 w-auto" src="spud-logo.png" alt="MySite Logo" onerror="this.onerror=null; this.src='https://placehold.co/100x80/F9F6EE/006A4E?text=Logo';">
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-4">
                            <a href="#" class="nav-link-desktop text-gray-700 px-3 py-2 rounded-md text-sm font-medium">Home</a>
                            <a href="#" class="nav-link-desktop text-gray-700 px-3 py-2 rounded-md text-sm font-medium">About</a>
                            <a href="#" class="nav-link-desktop text-gray-700 px-3 py-2 rounded-md text-sm font-medium">Contact</a>
                        </div>
                    </div>
                </div>
                <div class="hidden md:flex md:items-center md:ml-6">
                    <div class="ml-4 flex items-center space-x-4">
                        <button id="search-open-button" type="button" class="focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-green-600 flex items-center">
                            <svg class="search-bar-icon h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
                            </svg>
                            <span class="search-bar-placeholder-text">Search (Ctrl+K)</span>
                        </button>
                        <button type="button" id="login-button" class="ml-3">
                            Login
                        </button>
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button type="button" class="mobile-menu-button bg-white inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#" class="nav-link-mobile text-gray-700 block px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="#" class="nav-link-mobile text-gray-700 block px-3 py-2 rounded-md text-base font-medium">About</a>
                <a href="#" class="nav-link-mobile text-gray-700 block px-3 py-2 rounded-md text-base font-medium">Contact</a>
                 <button id="search-open-button-mobile" type="button" class="nav-link-mobile w-full mt-2 text-left text-gray-700 block px-3 py-2 rounded-md text-base font-medium flex items-center justify-between">
                    Search
                    <span class="kbd-shortcut">Ctrl+K</span>
                </button>
            </div>
            <div class="pt-4 pb-3 border-t border-gray-200">
                <div class="px-2">
                     <button type="button" id="mobile-login-button" class="w-full">
                        Login
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div id="search-overlay" class="hidden">
        <button id="search-close-button" type="button" class="search-overlay-close-btn">
            <span class="sr-only">Close search</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
            </svg>
        </button>
        <div class="search-overlay-content">
            <div class="search-input-wrapper-overlay">
                 <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="search-icon-overlay">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                </svg>
                <input type="text" id="searchInputOverlay" placeholder="Search articles, documents..." autocomplete="off" class=""/>
                <button id="clearSearchInputButton" type="button" aria-label="Clear search input">
                    Clear
                </button>
                 <div id="loadingSpinnerOverlay" aria-label="Loading search results">
                    <svg viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                </div>
            </div>
            <div class="sample-searches-overlay" id="sampleSearchesContainerOverlay">
                <span class="sample-searches-label-overlay">Trending</span>
                <span class="sample-search-item-overlay" data-query="JavaScript">JavaScript</span>
                <span class="sample-search-item-overlay" data-query="React">React</span>
                <span class="sample-search-item-overlay" data-query="API">API</span>
                <span class="sample-search-item-overlay" data-query="Design">Design</span>
                <span class="sample-search-item-overlay" data-query="Python">Python</span>
            </div>
            <div class="filters-container-overlay">
                <div class="filter-item-overlay">
                    <label for="categoryFilterOverlay">Category</label>
                    <select id="categoryFilterOverlay">
                        <option value="">All</option>
                        <option value="Thesis">Thesis</option>
                        <option value="Synergy">Synergy</option>
                        <option value="Confluence">Confluence</option>
                        <option value="Dissertation">Dissertation</option>
                    </select>
                </div>
                <div class="filter-item-overlay">
                    <label for="authorFilterOverlay">Author</label>
                    <select id="authorFilterOverlay">
                        <option value="">All</option>
                    </select>
                </div>
                <div class="filter-item-overlay">
                    <label for="keywordsFilterOverlay">Keyword(s)</label>
                    <select id="keywordsFilterOverlay">
                        <option value="">All</option>
                         </select>
                </div>
                <div class="filter-item-overlay">
                    <label for="yearFilterOverlay">Year</label>
                    <select id="yearFilterOverlay">
                        <option value="">All</option>
                    </select>
                </div>
            </div>
            <div id="search-results-overlay">
                 <p id="searchPlaceholderOverlay" class="search-no-results">Start typing, apply filters, or press <span class="kbd-shortcut">Ctrl+K</span> or <span class="kbd-shortcut">/</span> to search.</p>
            </div>
        </div>
    </div>

    <main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <div class="py-6 sm:px-0">
            <div class="border-4 border-dashed border-gray-200 rounded-lg min-h-[24rem] flex items-center justify-center">
                <h1 class="text-2xl font-semibold text-gray-900 p-4 text-center">Page Content Area</h1>
            </div>
        </div>
         <div class="py-6 sm:px-0 mt-8">
            <div class="bg-white shadow rounded-lg p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Another Section</h2>
                <p class="text-gray-600">Some more content goes here to make the page longer and demonstrate how the sticky navbar works.</p>
            </div>
        </div>
         <div class="py-6 sm:px-0 mt-8">
            <div class="bg-white shadow rounded-lg p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Yet Another Section</h2>
                <p class="text-gray-600">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
        </div>
         <div class="py-6 sm:px-0 mt-8 min-h-[24rem]">
             <div class="bg-white shadow rounded-lg p-6 h-full flex items-center justify-center">
                 <p class="text-gray-500">More content to ensure scrolling...</p>
             </div>
         </div>
    </main>

    <script>
        /*
        ---------------------------------------------------------------------------
        DATABASE CONNECTION & DYNAMIC DATA - GENERAL NOTES FOR WEB DEVELOPMENT:
        ---------------------------------------------------------------------------
        Frontend JavaScript (like this file) CANNOT directly connect to a database
        for security and technical reasons. Instead, the frontend communicates with a backend API.
        The backend API handles database connections, queries, and business logic.

        Workflow:
        1. Frontend makes an HTTP request to a backend API endpoint.
        2. Backend API processes the request, performs database operations.
        3. Backend API sends data back to the frontend (usually JSON).
        4. Frontend JavaScript updates the HTML dynamically.
        ---------------------------------------------------------------------------
        */
        document.addEventListener('DOMContentLoaded', () => {
            const DEBOUNCE_DELAY = 300;
            const DATABASE_SEARCH_BACKEND_URL = '/api/search';
            const TRENDING_TOPICS_URL = '/api/trending-topics';
            let originalBodyOverflow = '';

            const mockSearchResultsData = [
                { title: "Understanding JavaScript Closures", description: "A deep dive into closures...", url: "#/js-closures", category: "Thesis", author: "Dr. Ellie Script", keywords: "JavaScript, Closures, Scope, Functions", year: "2023" },
                { title: "Advanced React Patterns", description: "Explore advanced patterns in React...", url: "#/react-advanced", category: "Dissertation", author: "Prof. Ada Component", keywords: "React, JavaScript, Frontend, Patterns, Web", year: "2024" },
                { title: "Intro to Python for Thesis Research", description: "A beginner-friendly guide to Python...", url: "#/python-data-science", category: "Thesis", author: "Dr. Guido Byte", keywords: "Python, Data Analysis, Pandas, AI, Research", year: "2023" },
                { title: "The Confluence of Design and Development", description: "How Tailwind CSS helps bridge the gap...", url: "#/tailwind-guide", category: "Confluence", author: "Mr. Adam Utility", keywords: "TailwindCSS, CSS, Frontend, Design, UI, Confluence", year: "2022" },
                { title: "The Future of AI in Dissertation Writing", description: "Exploring ethical implications of AI...", url: "#/ai-thesis", category: "Dissertation", author: "Dr. Alan Intellect", keywords: "AI, Academia, Ethics, Research, Artificial Intelligence", year: "2024" },
                { title: "Synergy in Collaborative Software Projects", description: "Best practices for teamwork...", url: "#/software-synergy", category: "Synergy", author: "Ms. Team Lead", keywords: "Teamwork, Software, Collaboration, Agile, Synergy", year: "2023" },
                { title: "Crafting a Compelling Thesis", description: "A guide to structuring a thesis...", url: "#/thesis-crafting", category: "Thesis", author: "Dr. Jane Structure", keywords: "Thesis, Writing, Research, Academia", year: "2022" },
                { title: "Dissertation Defense: Strategies", description: "Prepare for your dissertation defense...", url: "#/dissertation-defense", category: "Dissertation", author: "Prof. Max Argument", keywords: "Dissertation, Defense, Academia, Presentation", year: "2024" }
            ];

            const bodyElement = document.body;
            const mobileMenuButton = document.querySelector('.mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuOpenIcon = mobileMenuButton?.querySelector('svg:not(.hidden)');
            const mobileMenuCloseIcon = mobileMenuButton?.querySelector('svg.hidden');
            const searchOpenButton = document.getElementById('search-open-button');
            const searchOpenButtonMobile = document.getElementById('search-open-button-mobile');
            const searchOverlay = document.getElementById('search-overlay');
            const searchCloseButton = document.getElementById('search-close-button');
            const searchInputOverlay = document.getElementById('searchInputOverlay');
            const clearSearchInputButton = document.getElementById('clearSearchInputButton');
            const searchResultsOverlay = document.getElementById('search-results-overlay');
            const loadingSpinnerOverlay = document.getElementById('loadingSpinnerOverlay');
            const sampleSearchesContainerOverlay = document.getElementById('sampleSearchesContainerOverlay');
            const categoryFilterOverlay = document.getElementById('categoryFilterOverlay');
            const authorFilterOverlay = document.getElementById('authorFilterOverlay');
            const keywordsFilterOverlay = document.getElementById('keywordsFilterOverlay');
            const yearFilterOverlay = document.getElementById('yearFilterOverlay');
            const loginButtonDesktop = document.getElementById('login-button');
            const loginButtonMobile = document.getElementById('mobile-login-button');
            const confettiCanvas = document.getElementById('confetti-canvas');

            let myConfetti = null;
            if (confettiCanvas && typeof confetti === 'function') {
                 myConfetti = confetti.create(confettiCanvas, {
                    resize: true,
                    useWorker: true
                });
            } else {
                console.warn("Confetti canvas or library not found. Confetti effects will be disabled.");
            }

            function toggleMobileMenu(forceClose = false) {
                 if (!mobileMenu || !mobileMenuButton || !mobileMenuOpenIcon || !mobileMenuCloseIcon) {
                     console.error("Essential mobile menu elements are missing."); return;
                 }
                const isCurrentlyExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                const openMenu = forceClose ? false : !isCurrentlyExpanded;
                mobileMenuButton.setAttribute('aria-expanded', openMenu.toString());
                mobileMenu.classList.toggle('hidden', !openMenu);
                mobileMenuOpenIcon.classList.toggle('hidden', openMenu);
                mobileMenuCloseIcon.classList.toggle('hidden', !openMenu);
            }

            function openSearch() {
                 if (!searchOverlay || !searchInputOverlay || !bodyElement) return;
                originalBodyOverflow = bodyElement.style.overflow;
                bodyElement.style.overflow = 'hidden';
                searchOverlay.classList.remove('hidden');
                searchOverlay.classList.add('visible');
                setTimeout(() => {
                    searchInputOverlay.focus();
                    if (clearSearchInputButton) {
                        clearSearchInputButton.classList.toggle('visible', searchInputOverlay.value.length > 0);
                    }
                }, 50);
                if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                    toggleMobileMenu(true);
                }
                const currentPlaceholderText = `Start typing, apply filters, or press <span class="kbd-shortcut">Ctrl+K</span> or <span class="kbd-shortcut">/</span> to search.`;
                if (searchInputOverlay.value === '' && (categoryFilterOverlay.value || authorFilterOverlay.value || keywordsFilterOverlay.value || yearFilterOverlay.value)) {
                    performSearchOverlay();
                } else if (searchInputOverlay.value === '' && searchResultsOverlay) {
                    searchResultsOverlay.innerHTML = `<p id="searchPlaceholderOverlay" class="search-no-results">${currentPlaceholderText}</p>`;
                    const newPlaceholder = document.getElementById('searchPlaceholderOverlay');
                    if(newPlaceholder) newPlaceholder.classList.remove('hidden');
                } else if (searchResultsOverlay.innerHTML.trim() === '') {
                     searchResultsOverlay.innerHTML = `<p id="searchPlaceholderOverlay" class="search-no-results">${currentPlaceholderText}</p>`;
                }
            }

            function closeSearch() {
                 if (!searchOverlay || !searchInputOverlay || !bodyElement) return;
                bodyElement.style.overflow = originalBodyOverflow;
                searchOverlay.classList.remove('visible');
                searchOverlay.classList.add('hidden');
                searchInputOverlay.value = '';
                if (clearSearchInputButton) {
                    clearSearchInputButton.classList.remove('visible');
                }
            }

            function highlightText(text, query) {
                if (!query || typeof text !== 'string') return text || '';
                const escapedQuery = query.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
                const regex = new RegExp(`(${escapedQuery})`, 'gi');
                return text.replace(regex, '<span class="highlight">$1</span>');
            }

            let debounceTimerOverlay;
            function debounceOverlay(func, delay) {
                return function(...args) {
                    clearTimeout(debounceTimerOverlay);
                    debounceTimerOverlay = setTimeout(() => func.apply(this, args), delay);
                };
            }

            function populateSelectWithOptions(selectElement, optionsData, valueField, textField = null) {
                if (!selectElement) return;
                const currentVal = selectElement.value;
                while (selectElement.options.length > 1) { selectElement.remove(1); }
                if (!Array.isArray(optionsData)) { console.warn("populateSelectWithOptions: optionsData is not an array.", optionsData); return; }
                optionsData.forEach(item => {
                    const option = document.createElement('option');
                    option.value = typeof item === 'object' ? item[valueField] : item;
                    option.textContent = textField && typeof item === 'object' ? item[textField] : option.value;
                    selectElement.appendChild(option);
                });
                if (currentVal && Array.from(selectElement.options).some(opt => opt.value === currentVal)) {
                    selectElement.value = currentVal;
                }
            }
            async function initializeFiltersOverlay() { /* Placeholder */ }

            async function performSearchOverlay() {
                if (!searchResultsOverlay || !searchInputOverlay || !loadingSpinnerOverlay ) {
                     console.error("Search UI elements missing for performSearchOverlay!"); return;
                }
                const query = searchInputOverlay.value.trim().toLowerCase();
                const selectedCategory = categoryFilterOverlay.value;
                const selectedAuthor = authorFilterOverlay.value;
                const selectedKeywords = keywordsFilterOverlay.value.toLowerCase();
                const selectedYear = yearFilterOverlay.value;
                const hasQuery = !!query;
                const hasFilters = !!(selectedCategory || selectedAuthor || selectedKeywords || selectedYear);
                const currentPlaceholderText = `Start typing, apply filters, or press <span class="kbd-shortcut">Ctrl+K</span> or <span class="kbd-shortcut">/</span> to search.`;
                let placeholderEl = document.getElementById('searchPlaceholderOverlay');

                if (!hasQuery && !hasFilters) {
                    searchResultsOverlay.innerHTML = '';
                    if (!placeholderEl) {
                        searchResultsOverlay.innerHTML = `<p id="searchPlaceholderOverlay" class="search-no-results">${currentPlaceholderText}</p>`;
                        placeholderEl = document.getElementById('searchPlaceholderOverlay');
                    } else { placeholderEl.innerHTML = currentPlaceholderText; }
                    if(placeholderEl) placeholderEl.classList.remove('hidden');
                    loadingSpinnerOverlay.classList.remove('visible');
                    if (clearSearchInputButton) clearSearchInputButton.classList.remove('visible');
                    return;
                }

                if(placeholderEl) placeholderEl.classList.add('hidden');
                loadingSpinnerOverlay.classList.add('visible');
                searchResultsOverlay.innerHTML = '';

                setTimeout(() => { // Mock search
                    let filteredResults = mockSearchResultsData;
                    if (query) {
                        filteredResults = filteredResults.filter(item => item.title.toLowerCase().includes(query) || item.description.toLowerCase().includes(query) || (item.keywords && item.keywords.toLowerCase().includes(query)));
                    }
                    if (selectedCategory) { filteredResults = filteredResults.filter(item => item.category === selectedCategory); }
                    if (selectedAuthor && authorFilterOverlay.options.length > 1) { filteredResults = filteredResults.filter(item => item.author === selectedAuthor); }
                    if (selectedKeywords && keywordsFilterOverlay.options.length > 1) { filteredResults = filteredResults.filter(item => item.keywords && item.keywords.toLowerCase().includes(selectedKeywords)); }
                    if (selectedYear && yearFilterOverlay.options.length > 1) { filteredResults = filteredResults.filter(item => item.year === selectedYear); }
                    displaySearchResultsOverlay(filteredResults, searchInputOverlay.value.trim());
                    loadingSpinnerOverlay.classList.remove('visible');
                }, 500);
            }

            function displaySearchResultsOverlay(hits, query) {
                if (!searchResultsOverlay) return;
                let placeholderEl = document.getElementById('searchPlaceholderOverlay');
                if(placeholderEl) placeholderEl.classList.add('hidden');
                searchResultsOverlay.innerHTML = '';
                if (!Array.isArray(hits)) {
                    console.error("displaySearchResultsOverlay: 'hits' is not an array.", hits);
                    searchResultsOverlay.innerHTML = `<p class="search-no-results">Invalid search results format.</p>`; return;
                }
                if (hits.length === 0) {
                    let message = "No results found";
                    if (query) message += ` for "${highlightText(query, query)}"`;
                    if (categoryFilterOverlay.value || authorFilterOverlay.value || keywordsFilterOverlay.value || yearFilterOverlay.value) { message += " with current filters"; }
                    searchResultsOverlay.innerHTML = `<p class="search-no-results">${message}. Try different search/filters.</p>`; return;
                }
                const fragment = document.createDocumentFragment();
                hits.forEach(item => {
                    const resultElement = document.createElement('a');
                    resultElement.href = item.url || '#';
                    resultElement.classList.add('search-result-item');
                    resultElement.target = "_blank"; resultElement.rel = "noopener noreferrer";
                    const titleHighlighted = highlightText(item.title, query);
                    const descHighlighted = highlightText(item.description, query);
                    let keywordsHTML = '';
                    if (item.keywords) {
                        const keywordsArray = item.keywords.split(',').map(kw => kw.trim()).filter(kw => kw);
                        keywordsHTML = keywordsArray.map(kw => `<span class="keyword-pill">${kw}</span>`).join('');
                    }
                    resultElement.innerHTML = `
                        <div class="search-result-title">${titleHighlighted || 'No Title'}</div>
                        <div class="search-result-meta-primary">
                            ${item.author ? `<span class="search-result-author">By: ${item.author}</span>` : ''}
                            ${item.year ? `<span class="search-result-year">${item.year}</span>` : ''}
                        </div>
                        <div class="search-result-category-keywords">
                            ${item.category ? `<span class="search-result-category-tag">${item.category}</span>` : ''}
                            ${keywordsHTML ? `<div class="search-result-keywords-container">${keywordsHTML}</div>` : ''}
                        </div>
                        <div class="search-result-desc">${descHighlighted || 'No description.'}</div>
                    `;
                    fragment.appendChild(resultElement);
                });
                searchResultsOverlay.appendChild(fragment);
            }

            const debouncedPerformSearch = debounceOverlay(performSearchOverlay, DEBOUNCE_DELAY);
            if (searchInputOverlay) {
                searchInputOverlay.addEventListener('input', () => {
                    debouncedPerformSearch();
                    if (clearSearchInputButton) {
                        clearSearchInputButton.classList.toggle('visible', searchInputOverlay.value.length > 0);
                    }
                });
            }
            if (clearSearchInputButton) {
                clearSearchInputButton.addEventListener('click', () => {
                    searchInputOverlay.value = '';
                    clearSearchInputButton.classList.remove('visible');
                    performSearchOverlay(); searchInputOverlay.focus();
                });
            }
            [categoryFilterOverlay, authorFilterOverlay, keywordsFilterOverlay, yearFilterOverlay].forEach(filterEl => {
                if (filterEl) filterEl.addEventListener('change', performSearchOverlay);
            });
            if (sampleSearchesContainerOverlay) {
                sampleSearchesContainerOverlay.addEventListener('click', (event) => {
                    const target = event.target.closest('.sample-search-item-overlay');
                    if (target && target.dataset.query && searchInputOverlay) {
                        searchInputOverlay.value = target.dataset.query;
                        if (clearSearchInputButton) clearSearchInputButton.classList.add('visible');
                        performSearchOverlay(); searchInputOverlay.focus();
                    }
                });
            }

            if (mobileMenuButton) mobileMenuButton.addEventListener('click', () => toggleMobileMenu());
            if (searchOpenButton) searchOpenButton.addEventListener('click', (e) => { e.stopPropagation(); openSearch(); });
            if (searchOpenButtonMobile) searchOpenButtonMobile.addEventListener('click', (e) => { e.stopPropagation(); openSearch(); });
            if (searchCloseButton) searchCloseButton.addEventListener('click', closeSearch);
            if (searchOverlay) {
                searchOverlay.addEventListener('click', (event) => {
                    if (event.target === searchOverlay) closeSearch();
                });
            }

            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape') {
                    if (searchOverlay.classList.contains('visible')) { closeSearch(); event.preventDefault(); return; }
                }
                const isInputFocused = document.activeElement?.tagName === 'INPUT' || document.activeElement?.tagName === 'TEXTAREA' || document.activeElement?.isContentEditable;
                if (event.key === '/' && !isInputFocused && !searchOverlay.classList.contains('visible')) {
                    event.preventDefault(); openSearch();
                }
                if ((event.ctrlKey || event.metaKey) && event.key.toLowerCase() === 'k') {
                    event.preventDefault();
                    if (searchOverlay.classList.contains('visible')) {
                        if (document.activeElement !== searchInputOverlay) searchInputOverlay.focus();
                    } else { openSearch(); }
                }
            });

            function handleLogin(event) {
                console.log("Login button clicked. Implement login functionality here.");
                // Placeholder for actual login logic

                if (myConfetti) {
                    const rect = event.currentTarget.getBoundingClientRect();
                    const originX = (rect.left + rect.width / 2) / window.innerWidth;
                    const originY = (rect.top + rect.height / 2) / window.innerHeight;

                    myConfetti({
                        particleCount: 150,
                        spread: 90,
                        angle: 90,
                        origin: { x: originX, y: originY },
                        colors: ['#FDB813', '#EAA10F', '#006A4E', '#FFFFFF', '#F9F6EE'],
                        scalar: 1.2,
                        drift: 0.1,
                        gravity: 0.8,
                        ticks: 300
                    });

                    function fire(particleRatio, opts) {
                        myConfetti(Object.assign({}, {
                            origin: { x: originX, y: originY },
                            particleCount: Math.floor(200 * particleRatio),
                            colors: ['#FDB813', '#EAA10F', '#006A4E', '#FFFFFF'],
                        }, opts));
                    }

                    fire(0.25, { spread: 26, startVelocity: 55 });
                    fire(0.2, { spread: 60 });
                    fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
                    fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
                    fire(0.1, { spread: 120, startVelocity: 45 });
                }
            }

            if (loginButtonDesktop) loginButtonDesktop.addEventListener('click', handleLogin);
            if (loginButtonMobile) loginButtonMobile.addEventListener('click', handleLogin);

            initializeFiltersOverlay();

            const essentialElements = {
                bodyElement, mobileMenuButton, mobileMenu, searchOpenButton, searchOpenButtonMobile,
                searchOverlay, searchCloseButton, searchInputOverlay, searchResultsOverlay,
                loadingSpinnerOverlay, sampleSearchesContainerOverlay, categoryFilterOverlay,
                authorFilterOverlay, keywordsFilterOverlay, yearFilterOverlay, clearSearchInputButton,
                loginButtonDesktop, loginButtonMobile, confettiCanvas
            };
            for (const [name, el] of Object.entries(essentialElements)) {
                if (!el && name !== 'clearSearchInputButton' && name !== 'confettiCanvas') {
                    console.error(`Essential UI element "${name}" not found. Functionality may be broken.`);
                }
            }
            console.log("UI scripts initialized with Enhanced Login button (Legibility Improved). Navbar ready for Database Integration.");
        });
    </script>
</body>
</html>
