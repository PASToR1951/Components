<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Author Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="authorprofile.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
</head>
<body class="bg-gray-50 text-gray-900">

    <div class="container mx-auto p-4 md:p-8 min-h-screen font-sans">

        <div class="flex justify-end mb-6 space-x-2">
            <button id="edit-button" class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                <svg class="icon mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                Edit Profile
            </button>
            <button id="cancel-button" class="hidden inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                 <svg class="icon mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
                Cancel
            </button>
            <button id="save-button" class="hidden inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-green-300">
                <svg class="icon mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                Save Changes
            </button>
        </div>

        <div class="flex flex-col md:flex-row gap-6 md:gap-8">

            <div class="w-full md:w-1/3 lg:w-1/4 flex-shrink-0">
                <div id="profile-card" class="shadow-lg border border-gray-200 rounded-lg overflow-hidden bg-white">
                    <div class="items-center text-center pt-6 pb-4 bg-gray-50">
                        <div class="w-24 h-24 mb-4 border-4 border-white shadow-md mx-auto rounded-full">
                            <img id="avatar-image" class="object-cover w-full h-full rounded-full" src="" alt="Profile picture" style="display: none;">
                           <div id="avatar-placeholder" class="bg-gradient-to-br from-green-100 to-emerald-200 border border-dashed border-gray-300 rounded-full w-full h-full flex items-center justify-center" style="display: none;">
                               <span id="avatar-initials" class="text-3xl font-semibold text-green-700"></span>
                           </div>
                        </div>

                        <h1 id="display-full_name" class="text-xl font-bold text-gray-800 mt-1 px-4"></h1>
                        <div id="edit-full_name-container" class="hidden w-full space-y-1 mb-2 px-4">
                            <label for="edit-full_name" class="text-xs font-medium text-gray-500 block text-left">Full Name <span class="text-red-500">*</span></label>
                            <input type="text" id="edit-full_name" name="full_name" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900 text-center text-lg font-semibold box-border" placeholder="Enter full name">
                            <p id="error-full_name" class="text-xs text-red-500 mt-1 text-left hidden"></p>
                        </div>

                        <p id="display-affiliation" class="text-gray-600 px-4 text-sm"></p>
                        <div id="edit-affiliation-container" class="hidden w-full space-y-1 mb-2 px-4">
                            <label for="edit-affiliation" class="text-xs font-medium text-gray-500 block text-left">Affiliation <span class="text-red-500">*</span></label>
                            <input type="text" id="edit-affiliation" name="affiliation" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900 text-center text-sm box-border" placeholder="Enter affiliation">
                            <p id="error-affiliation" class="text-xs text-red-500 mt-1 text-left hidden"></p>
                        </div>
                    </div>

                    <div class="px-4 pb-4 pt-4 space-y-4">
                        <div id="display-department-container" class="text-sm">
                            <span class="font-semibold text-gray-700">Department: </span>
                            <span id="display-department" class="text-gray-600"></span>
                        </div>
                        <div id="edit-department-container" class="hidden w-full space-y-1">
                            <label for="edit-department" class="text-xs font-medium text-gray-500">Department <span class="text-red-500">*</span></label>
                            <input type="text" id="edit-department" name="department" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900 text-sm box-border" placeholder="Enter department">
                             <p id="error-department" class="text-xs text-red-500 mt-1 hidden"></p>
                        </div>

                        <div id="display-year_of_graduation-container" class="text-sm hidden">
                            <span class="font-semibold text-gray-700">Graduated: </span>
                            <span id="display-year_of_graduation" class="text-gray-600"></span>
                        </div>
                        <div id="edit-year_of_graduation-container" class="hidden w-full space-y-1">
                            <label for="edit-year_of_graduation" class="text-xs font-medium text-gray-500">Year of Graduation</label>
                            <input type="number" id="edit-year_of_graduation" name="year_of_graduation" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900 text-sm" placeholder="e.g., 2010" min="1900">
                        </div>

                        <hr class="my-4 border-gray-200">

                        <h3 class="text-sm font-semibold mb-2 text-gray-800 uppercase tracking-wide">Contact</h3>
                        <div class="space-y-3">
                            <div id="display-email-container" class="flex items-center text-sm space-x-2 hidden">
                                <svg class="icon text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                                <a id="display-email" href="" class="text-green-600 hover:underline break-all"></a>
                            </div>
                            <div id="edit-email-container" class="hidden w-full space-y-1">
                                <label for="edit-email" class="text-xs font-medium text-gray-500">Email</label>
                                <input type="email" id="edit-email" name="email" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900 text-sm" placeholder="e.g., name@example.com">
                            </div>

                            <div id="display-linkedin-container" class="flex items-center text-sm space-x-2 hidden">
                                <svg class="icon text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
                                <a id="display-linkedin" href="" target="_blank" rel="noopener noreferrer" class="text-green-600 hover:underline break-all"></a>
                            </div>
                            <div id="edit-linkedin-container" class="hidden w-full space-y-1">
                                <label for="edit-linkedin" class="text-xs font-medium text-gray-500">LinkedIn Profile URL</label>
                                <input type="url" id="edit-linkedin" name="linkedin" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900 text-sm" placeholder="e.g., https://linkedin.com/in/...">
                            </div>

                             <div id="display-orcid_id-container" class="flex items-center text-sm space-x-2 hidden">
                                <svg class="icon text-green-600" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 256 256" fill="currentColor"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm38.54,136.76c-14.45,14.45-39.3,14.45-53.75,0-1.17-1.17-2.25-2.41-3.24-3.71a56,56,0,0,1-17.1-40.51A55.74,55.74,0,0,1,110,76.06a56,56,0,0,1,79.2,0,55.74,55.74,0,0,1,17.1,40.51,56,56,0,0,1-17.1,40.51C187.77,158.31,177.69,161.18,166.54,160.76Zm-80-30.19a32,32,0,1,1,32,32A32.06,32.06,0,0,1,86.51,130.57Z" /></svg>
                                <span id="display-orcid_id" class="text-gray-600 break-all"></span>
                            </div>
                            <div id="edit-orcid_id-container" class="hidden w-full space-y-1">
                                <label for="edit-orcid_id" class="text-xs font-medium text-gray-500">ORCID ID</label>
                                <input type="text" id="edit-orcid_id" name="orcid_id" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900 text-sm" placeholder="e.g., 0000-0001-2345-6789">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="w-full md:w-2/3 lg:w-3/4 space-y-6">
                <div class="shadow-lg border border-gray-200 rounded-lg bg-white">
                    <div class="px-4 py-5 sm:px-6">
                        <h2 class="text-xl font-bold text-gray-800">Biography</h2>
                    </div>
                    <div class="px-4 py-5 sm:p-6">
                        <p id="display-bio" class="text-gray-700 whitespace-pre-line text-sm leading-relaxed"></p>
                        <div id="edit-bio-container" class="hidden w-full space-y-1">
                             <label for="edit-bio" class="text-xs font-medium text-gray-500">Edit Biography</label>
                             <textarea id="edit-bio" name="bio" rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900 text-sm leading-relaxed min-h-[150px]" placeholder="Enter biography..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="shadow-lg border border-gray-200 rounded-lg bg-white">
                    <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
                        <h2 class="text-xl font-bold text-gray-800">Works (<span id="publications-count">0</span>)</h2>
                        <p id="publications-description" class="mt-1 text-gray-600 text-sm"></p>
                    </div>
                    <div class="px-4 py-5 sm:p-6">
                        <div id="view-publications-container">
                             <div class="space-y-6">
                                <div class="mb-6">
                                    <label for="publication-search" class="sr-only">Search works by title</label>
                                    <div class="relative">
                                        <input type="text" id="publication-search" placeholder="Search works by title..." class="w-full pl-4 pr-10 py-2 border border-gray-300 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 bg-white" aria-label="Search publications by title">
                                        <svg class="absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                                    </div>
                                </div>

                                <div class="flex flex-wrap items-center gap-2" id="category-filter-container">
                                    <span class="text-sm font-medium text-gray-700 shrink-0 mr-2">Filter by Category:</span>
                                    </div>

                                <div class="mb-6">
                                    <button id="tag-filter-toggle" type="button" class="text-sm px-3 py-1.5 h-auto border border-gray-300 hover:bg-gray-100 rounded-full flex items-center text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500" aria-expanded="false" aria-controls="tag-filter-content">
                                        Filter by Tags
                                        <svg id="tag-filter-chevron-down" class="icon ml-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                                        <svg id="tag-filter-chevron-up" class="icon ml-2 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>
                                    </button>
                                    <div id="tag-filter-content" class="tag-filter-content mt-3">
                                        <div id="tag-filter-buttons" class="flex flex-wrap items-center gap-2 p-3 border border-gray-200 rounded-md bg-gray-50">
                                            </div>
                                    </div>
                                </div>

                                <div id="publications-list" class="space-y-4">
                                    </div>
                                <div id="no-results-message" class="hidden text-center py-12 px-6 text-gray-500 bg-white rounded-md shadow-sm border border-gray-200">
                                    <p class="text-lg font-medium">No results found</p>
                                    <p class="text-sm mt-1">Try adjusting your search query or filters.</p>
                                </div>
                            </div>
                        </div>
                        <div id="edit-publications-container" class="hidden w-full space-y-2">
                            <label for="edit-publications" class="text-xs font-medium text-gray-500">Publications (JSON Array)</label>
                            <textarea id="edit-publications" name="publications" rows="15" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-gray-900 text-gray-200 min-h-[250px] font-mono text-xs leading-normal whitespace-pre" spellcheck="false" placeholder='[\n  {\n    "id": "unique-pub-id",\n    "title": "Publication Title",\n    "category": "Synergy",\n    "year": 2023,\n    "link": "https://example.com/pub",\n    "tags": ["tag1", "tag2"]\n  }\n]'></textarea>
                            <p id="error-publications" class="text-xs text-red-500 mt-1 hidden"></p>
                            <p class="text-xs text-gray-500 mt-1">
                                Ensure the input is a valid JSON array following the required structure (id, title, category, year, tags).
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="publication-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="publication-modal-title" aria-describedby="publication-modal-description">
            <div class="modal-content bg-white">
                 <button id="modal-close-button" type="button" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 rounded-full p-1" aria-label="Close publication details">
                    <svg class="icon-lg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
                 </button>

                 <h2 id="publication-modal-title" class="text-xl md:text-2xl font-bold text-gray-900 pr-10 mb-4"></h2>

                 <div id="publication-modal-description" class="space-y-3 text-sm mb-5">
                     <div class="text-gray-700">
                         <span class="font-semibold text-gray-800">Category:</span>
                         <span id="modal-category"></span>
                     </div>
                     <div class="text-gray-700">
                         <span class="font-semibold text-gray-800">Year:</span>
                         <span id="modal-year"></span>
                     </div>
                     <div id="modal-link-container" class="text-gray-700 flex items-start space-x-1.5 hidden">
                         <span class="font-semibold text-gray-800 shrink-0">Link:</span>
                         <a id="modal-link" href="#" target="_blank" rel="noopener noreferrer" class="text-green-600 hover:underline break-all inline-flex items-center group">
                             <span id="modal-link-text"></span>
                             <svg class="icon-sm ml-1 opacity-70 group-hover:opacity-100 transition-opacity" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                         </a>
                     </div>
                     <div id="modal-tags-container" class="text-gray-700 hidden">
                         <span class="font-semibold text-gray-800">Tags:</span>
                         <div id="modal-tags" class="flex flex-wrap gap-1.5 mt-1.5">
                             </div>
                     </div>
                 </div>

                 <div class="flex justify-end pt-4 border-t border-gray-200 mt-5">
                    <button id="modal-close-button-footer" type="button" class="px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        Close
                    </button>
                 </div>
            </div>
        </div>
    </div> 
    <script src="authorprofile.js"></script>
</body>
</html>
